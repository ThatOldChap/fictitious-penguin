{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <style>
        input[type="text"] {
            text-align: center;        
        }
        input[type="text"]::placeholder {
            text-align: center;        
        }
    </style>
{% endblock %}

{% block app_content %}
<div>
    <h1>{{ group.name }} Channels</h1>
    <form action="" method="POST" name="channels_form">
        {{ channels_form.hidden_tag() }}
        <table class="table table-hover table-bordered align-middle">
            <thead>
                <tr class="table-primary text-center align-middle">
                    <th class="align-middle">Channel Name</th>
                    <th class="align-middle">Injection Value</th>
                    <th class="align-middle">Test Value</th>
                    <th class="align-middle">Error</th>
                    <th class="align-middle">Last Updated</th>
                    <th class="align-middle">Notes</th>
                </tr>
            </thead>
            <tbody>
                {% for channel, channel_form in zip(channels, channels_form.channels) %}
                    <th class="align-middle text-center" rowspan="{{ channel.num_testpoints() + 1 }}">
                        {{ channel.name }}
                    </th>
                    {% for testpoint, testpoint_form in zip(channel.testpoints, channel_form.testpoints) %}
                        {% include 'testpoint.html' %}
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </form>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}

    <script>
        $(document).ready(function() {

            // Value Constants
            let CHANNELS = 'channels';
            let TESTPOINTS = 'testpoints';
            let INJECTION_VALUE = 'injection_value';
            let TEST_VALUE = 'test_value';
            let NOTES = 'notes';

            // Listener function for the Injection Value fields
            $(`[id$="${INJECTION_VALUE}"]`).change(function(event) {



            });


            // Listener function for the Test Value fields
            $(`[id$="${TEST_VALUE}"]`).change(function(event) {



            });


            // Listener function for the Notes fields
            $(`[id$="${NOTES}"]`).change(function(event) {



            });



        });
    </script>
{% endblock %}