{% extends "base.html" %}

{% block app_content %}
    <div>
        <div class="row align-items-center">
            <div class="col-auto">
                {# Back Button for navigating back to the Jobs Page #}
                <button type="button" class="btn btn-primary">
                    <a style="color:#FFFFFF;" href="{{ url_for('main.jobs', project_id=job.project.id) }}">Back to Jobs</a>
                </button>              
            </div>
            <div class="col-auto">
                <h1>{{ job.name }} {{ job.stage }} {{ job.phase }} - Groups</h1>
            </div>
            <div class="col-auto">
                {# Create Button for creating a new Group #}
                <button type="button" class="btn btn-success">
                    <a style="color:#FFFFFF;" href="{{ url_for('main.add_group', job_id=job.id) }}">Add Group</a>
                </button>
            </div>         
        </div>  
        <table class="table table-hover table-bordered align-middle">
            <thead>
                <tr class="table-primary text-center align-middle">
                    <th class="align-middle">Name</th>
                    <th class="align-middle" width="30%">Progress</th>
                    <th class="align-middle">Status</th>
                    <th class="align-middle">Last Updated</th>
                    <th class="align-middle">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for group in groups %}
                    {% include 'group.html' %}
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}

    <script>
        $(document).ready(function() {

            // Update the progress bar
            let GROUP = 'group';
            let CHANNEL = 'channel';
            updateAllProgressBars(GROUP, CHANNEL);
        });
    </script>
{% endblock %}